<% extend 'phone/base.html' %>


<% block 'head' : %>
<link rel="stylesheet" href="/dist/phone-pay.css">
<% end %>

<div class="am-padding am-text-center">
    <div class="am-btn am-btn-success am-radiu">正在支付...</div>
</div>



<script type="text/plain" id="pay-info">
    <%- @payInfo %>
</script>


<script type="text/plain" id="wechatJsConfig">
    <%- @wechatJsConfig %>
</script>


<% block 'scripts': %>
<script src="/dist/phone-pay.js"></script>
<script>
//    var $ = jQuery;
//
//    try {
//        document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
//
//            var payInfo = JSON.parse($('#pay-info').html());
//
//            console.log(payInfo);
//            alert('start to pay');
//
//            alert(JSON.stringify(payInfo));
//
//            //公众号支付
//            WeixinJSBridge.invoke('getBrandWCPayRequest', payInfo, function(res) {
//                console.log(res);
//                alert(JSON.stringify(res));
//                if (res.err_msg == "get_brand_wcpay_request:ok") {
//                    alert('支付完成');
//                }
//            });
//        }, false);
//    } catch (ex) {
//        // todo: 删除alert
//        alert(JSON.stringify(ex));
//    }
</script>
<!--<script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>-->
<% end %>